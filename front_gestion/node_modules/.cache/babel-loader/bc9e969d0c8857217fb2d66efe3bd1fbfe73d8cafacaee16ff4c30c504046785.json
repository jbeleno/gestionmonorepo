{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bele\\xF1o\\\\Desktop\\\\gestion\\\\gestionmonorepo\\\\front_gestion\\\\src\\\\components\\\\AdminCuenta.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"../styles/AdminCuenta.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../config/supabase\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ESTADOS = [\"Pago confirmado\", \"En preparación\", \"En domicilio\", \"Listo para recoger\", \"Entregado\"];\nfunction AdminCuenta() {\n  _s();\n  const navigate = useNavigate();\n  const [tab, setTab] = useState(\"productos\");\n  const [uploading, setUploading] = useState(false);\n\n  // Productos\n  const [productos, setProductos] = useState([]);\n  const [categorias, setCategorias] = useState([]);\n  const [nuevoProducto, setNuevoProducto] = useState({\n    nombre: \"\",\n    descripcion: \"\",\n    cantidad: 0,\n    precio: 0,\n    id_categoria: \"\",\n    imagen_url: \"\"\n  });\n  const [editandoProducto, setEditandoProducto] = useState(null);\n  const [productoEdit, setProductoEdit] = useState({});\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  // Categorías\n  const [nuevaCategoria, setNuevaCategoria] = useState({\n    nombre: \"\",\n    descripcion_corta: \"\",\n    descripcion_larga: \"\"\n  });\n  const [editandoCategoria, setEditandoCategoria] = useState(null);\n  const [categoriaEdit, setCategoriaEdit] = useState({});\n\n  // Pedidos\n  const [pedidos, setPedidos] = useState([]);\n  const [filtroEstado, setFiltroEstado] = useState(\"\");\n  const [verMasId, setVerMasId] = useState(null);\n  const [detallesPedido, setDetallesPedido] = useState({});\n  const [editandoEstadoId, setEditandoEstadoId] = useState(null);\n\n  // Filtros\n  const [filtroCategoria, setFiltroCategoria] = useState(\"\");\n  const [filtroNombre, setFiltroNombre] = useState(\"\");\n\n  // Cerrar sesión\n  const handleLogout = () => {\n    localStorage.removeItem(\"usuario\");\n    navigate(\"/\");\n  };\n\n  // Cargar datos iniciales\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:8000/productos/\").then(res => res.json()).then(setProductos);\n    fetch(\"http://127.0.0.1:8000/categorias/\").then(res => res.json()).then(setCategorias);\n    fetch(\"http://127.0.0.1:8000/pedidos/\").then(res => res.json()).then(setPedidos);\n  }, []);\n\n  // Filtrar pedidos por estado\n  useEffect(() => {\n    if (filtroEstado) {\n      fetch(`http://127.0.0.1:8000/pedidos/estado/${filtroEstado}`).then(res => res.json()).then(setPedidos);\n    } else {\n      fetch(\"http://127.0.0.1:8000/pedidos/\").then(res => res.json()).then(setPedidos);\n    }\n  }, [filtroEstado]);\n\n  // Función para subir imagen a Supabase\n  const uploadImage = async (file, id_producto) => {\n    try {\n      setUploading(true);\n\n      // Usar el formato con doble barra en la ruta\n      const fileName = `//producto_${id_producto}.jpg`;\n      const filePath = fileName;\n\n      // Subir archivo a Supabase Storage\n      const {\n        error: uploadError\n      } = await supabase.storage.from('productos').upload(filePath, file, {\n        upsert: true\n      });\n      if (uploadError) {\n        throw uploadError;\n      }\n\n      // Obtener la URL pública sin timestamp\n      const {\n        data\n      } = supabase.storage.from('productos').getPublicUrl(filePath);\n      return data.publicUrl;\n    } catch (error) {\n      console.error('Error al subir la imagen:', error);\n      alert('Error al subir la imagen');\n      return null;\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Manejador para el cambio de archivo\n  const handleFileChange = e => {\n    if (e.target.files && e.target.files[0]) {\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  // CRUD Productos\n  const handleCrearProducto = async e => {\n    e.preventDefault();\n\n    // 1. Crear el producto primero para obtener el id\n    const res = await fetch(\"http://127.0.0.1:8000/productos/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        ...nuevoProducto,\n        imagen_url: \"\"\n      })\n    });\n    if (res.ok) {\n      const prod = await res.json();\n\n      // 2. Si hay archivo, subirlo con el id del producto\n      let imagenUrl = \"\";\n      if (selectedFile) {\n        imagenUrl = await uploadImage(selectedFile, prod.id_producto);\n        if (!imagenUrl) {\n          // Si falla la subida de la imagen, eliminar el producto creado\n          await fetch(`http://127.0.0.1:8000/productos/${prod.id_producto}`, {\n            method: \"DELETE\"\n          });\n          return;\n        }\n\n        // Actualizar el producto con la url de la imagen\n        const updateRes = await fetch(`http://127.0.0.1:8000/productos/${prod.id_producto}`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            ...prod,\n            imagen_url: imagenUrl\n          })\n        });\n        if (updateRes.ok) {\n          const updatedProd = await updateRes.json();\n          setProductos([...productos, updatedProd]);\n        }\n      } else {\n        setProductos([...productos, prod]);\n      }\n      setNuevoProducto({\n        nombre: \"\",\n        descripcion: \"\",\n        cantidad: 0,\n        precio: 0,\n        id_categoria: \"\",\n        imagen_url: \"\"\n      });\n      setSelectedFile(null);\n    }\n  };\n  const handleActualizarProducto = async id => {\n    try {\n      let imagenUrl = productoEdit.imagen_url;\n\n      // Si hay un archivo seleccionado, eliminar la imagen antigua y subir la nueva\n      if (selectedFile) {\n        // 1. Eliminar la imagen antigua si existe\n        if (productoEdit.imagen_url) {\n          // Intentar eliminar con diferentes extensiones comunes\n          const extensions = ['.jpg', '.jpeg', '.png', '.gif'];\n          const baseFileName = `//producto_${id}`;\n\n          // Crear array de nombres de archivo a eliminar\n          const filesToDelete = extensions.map(ext => `${baseFileName}${ext}`);\n\n          // Eliminar todos los posibles archivos\n          const {\n            error: deleteError\n          } = await supabase.storage.from('productos').remove(filesToDelete);\n          if (deleteError) {\n            console.error('Error al eliminar la imagen antigua:', deleteError);\n          }\n        }\n\n        // 2. Subir la nueva imagen\n        imagenUrl = await uploadImage(selectedFile, id);\n        if (!imagenUrl) {\n          alert('Error al subir la imagen');\n          return;\n        }\n      }\n      const productoData = {\n        ...productoEdit,\n        imagen_url: imagenUrl\n      };\n      const res = await fetch(`http://127.0.0.1:8000/productos/${id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(productoData)\n      });\n      if (res.ok) {\n        const actualizado = await res.json();\n        // Actualizar la lista de productos\n        setProductos(productos.map(p => p.id_producto === id ? actualizado : p));\n        setEditandoProducto(null);\n        setProductoEdit({});\n        setSelectedFile(null);\n\n        // Recargar la lista completa de productos para asegurar que todo está actualizado\n        const productosRes = await fetch(\"http://127.0.0.1:8000/productos/\");\n        if (productosRes.ok) {\n          const productosActualizados = await productosRes.json();\n          setProductos(productosActualizados);\n        }\n      } else {\n        alert('Error al actualizar el producto');\n      }\n    } catch (error) {\n      console.error('Error al actualizar el producto:', error);\n      alert('Error al actualizar el producto');\n    }\n  };\n  const handleEditarClick = prod => {\n    setEditandoProducto(prod.id_producto);\n    setProductoEdit({\n      nombre: prod.nombre,\n      descripcion: prod.descripcion,\n      cantidad: prod.cantidad,\n      precio: prod.precio,\n      id_categoria: prod.id_categoria,\n      imagen_url: prod.imagen_url\n    });\n  };\n  const handleEliminarProducto = async id => {\n    try {\n      // 1. Obtener el producto del estado actual\n      const producto = productos.find(p => p.id_producto === id);\n      if (!producto) throw new Error('Producto no encontrado');\n\n      // 2. Si el producto tiene una imagen, eliminarla de Supabase\n      if (producto.imagen_url) {\n        console.log('Intentando eliminar imagen para producto:', id);\n        console.log('URL de la imagen:', producto.imagen_url);\n\n        // Construir el nombre del archivo sin las barras iniciales\n        const fileName = `producto_${id}.jpg`;\n        console.log('Nombre del archivo a eliminar:', fileName);\n\n        // Intentar eliminar el archivo\n        const {\n          data,\n          error: deleteError\n        } = await supabase.storage.from('productos').remove([fileName]);\n        if (deleteError) {\n          console.error('Error al eliminar la imagen:', deleteError);\n          throw new Error('Error al eliminar la imagen del producto: ' + deleteError.message);\n        }\n        console.log('Resultado de la eliminación:', data);\n      }\n\n      // 3. Eliminar el producto de la base de datos\n      const deleteRes = await fetch(`http://127.0.0.1:8000/productos/${id}`, {\n        method: \"DELETE\"\n      });\n      if (!deleteRes.ok) throw new Error('Error al eliminar el producto');\n\n      // 4. Actualizar la lista de productos\n      const productosRes = await fetch(\"http://127.0.0.1:8000/productos/\");\n      if (productosRes.ok) {\n        const productosActualizados = await productosRes.json();\n        setProductos(productosActualizados);\n      }\n    } catch (error) {\n      console.error('Error al eliminar el producto:', error);\n      alert('Error al eliminar el producto: ' + error.message);\n    }\n  };\n\n  // CRUD Categorías\n  const handleCrearCategoria = async e => {\n    e.preventDefault();\n    const res = await fetch(\"http://127.0.0.1:8000/categorias/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(nuevaCategoria)\n    });\n    if (res.ok) {\n      const cat = await res.json();\n      setCategorias([...categorias, cat]);\n      setNuevaCategoria({\n        nombre: \"\",\n        descripcion_corta: \"\",\n        descripcion_larga: \"\"\n      });\n    }\n  };\n  const handleEliminarCategoria = async id => {\n    await fetch(`http://127.0.0.1:8000/categorias/${id}`, {\n      method: \"DELETE\"\n    });\n    setCategorias(categorias.filter(c => c.id_categoria !== id));\n  };\n  const handleEditarCategoriaClick = cat => {\n    setEditandoCategoria(cat.id_categoria);\n    setCategoriaEdit({\n      nombre: cat.nombre,\n      descripcion_corta: cat.descripcion_corta,\n      descripcion_larga: cat.descripcion_larga\n    });\n  };\n  const handleActualizarCategoria = async id => {\n    const res = await fetch(`http://127.0.0.1:8000/categorias/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(categoriaEdit)\n    });\n    if (res.ok) {\n      const actualizada = await res.json();\n      setCategorias(categorias.map(c => c.id_categoria === id ? actualizada : c));\n      setEditandoCategoria(null);\n      setCategoriaEdit({});\n    }\n  };\n\n  // Actualizar estado de pedido\n  const handleActualizarEstado = async (id_pedido, nuevoEstado) => {\n    const pedido = pedidos.find(p => p.id_pedido === id_pedido);\n    if (!pedido) return;\n    const res = await fetch(`http://127.0.0.1:8000/pedidos/${id_pedido}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        ...pedido,\n        estado: nuevoEstado\n      })\n    });\n    if (res.ok) {\n      setPedidos(pedidos.map(p => p.id_pedido === id_pedido ? {\n        ...p,\n        estado: nuevoEstado\n      } : p));\n    }\n  };\n\n  // Ver productos del pedido\n  const handleVerMas = async id_pedido => {\n    if (verMasId === id_pedido) {\n      setVerMasId(null);\n      return;\n    }\n    // Si ya tenemos los detalles, solo mostrar\n    if (detallesPedido[id_pedido]) {\n      setVerMasId(id_pedido);\n      return;\n    }\n    // Obtener detalles y productos\n    const detallesRes = await fetch(`http://127.0.0.1:8000/detalle_pedidos/`);\n    const detallesAll = await detallesRes.json();\n    const detalles = detallesAll.filter(d => d.id_pedido === id_pedido);\n    // Obtener productos\n    const productosRes = await fetch(`http://127.0.0.1:8000/pedidos/${id_pedido}/productos`);\n    const productos = await productosRes.json();\n    setDetallesPedido(prev => ({\n      ...prev,\n      [id_pedido]: detalles.map(det => ({\n        ...det,\n        producto: productos.find(p => p.id_producto === det.id_producto)\n      }))\n    }));\n    setVerMasId(id_pedido);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-cuenta-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Panel de administrador\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogout,\n      style: {\n        float: 'right',\n        marginTop: '-2.5rem',\n        marginBottom: '1rem',\n        background: '#d32f2f',\n        color: '#fff',\n        border: 'none',\n        borderRadius: '6px',\n        padding: '0.5rem 1.2rem',\n        fontWeight: 'bold',\n        cursor: 'pointer'\n      },\n      children: \"Cerrar sesi\\xF3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTab(\"productos\"),\n        className: tab === \"productos\" ? \"active\" : \"\",\n        children: \"Productos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTab(\"categorias\"),\n        className: tab === \"categorias\" ? \"active\" : \"\",\n        children: \"Categor\\xEDas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTab(\"pedidos\"),\n        className: tab === \"pedidos\" ? \"active\" : \"\",\n        children: \"Pedidos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), tab === \"productos\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Productos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-filtros-productos\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: filtroCategoria,\n          onChange: e => setFiltroCategoria(e.target.value),\n          style: {\n            padding: \"0.5rem\",\n            borderRadius: \"6px\",\n            border: \"1.5px solid #6C3483\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Todas las categor\\xEDas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this), categorias.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: cat.id_categoria,\n            children: cat.nombre\n          }, cat.id_categoria, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Buscar por nombre...\",\n          value: filtroNombre,\n          onChange: e => setFiltroNombre(e.target.value),\n          style: {\n            padding: \"0.5rem\",\n            borderRadius: \"6px\",\n            border: \"1.5px solid #6C3483\",\n            flex: \"1 1 200px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCrearProducto,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: nuevoProducto.nombre,\n          onChange: e => setNuevoProducto({\n            ...nuevoProducto,\n            nombre: e.target.value\n          }),\n          placeholder: \"Nombre\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: nuevoProducto.descripcion,\n          onChange: e => setNuevoProducto({\n            ...nuevoProducto,\n            descripcion: e.target.value\n          }),\n          placeholder: \"Descripci\\xF3n\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: nuevoProducto.cantidad,\n          onChange: e => setNuevoProducto({\n            ...nuevoProducto,\n            cantidad: Number(e.target.value)\n          }),\n          placeholder: \"Cantidad\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: nuevoProducto.precio,\n          onChange: e => setNuevoProducto({\n            ...nuevoProducto,\n            precio: Number(e.target.value)\n          }),\n          placeholder: \"Precio\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: nuevoProducto.id_categoria,\n          onChange: e => setNuevoProducto({\n            ...nuevoProducto,\n            id_categoria: Number(e.target.value)\n          }),\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Categor\\xEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this), categorias.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: cat.id_categoria,\n            children: cat.nombre\n          }, cat.id_categoria, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 38\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-upload-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: handleFileChange,\n            style: {\n              display: 'none'\n            },\n            id: \"image-upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"image-upload\",\n            className: \"upload-button\",\n            children: selectedFile ? 'Cambiar imagen' : 'Seleccionar imagen'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 15\n          }, this), selectedFile && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"file-name\",\n            children: selectedFile.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: uploading,\n          children: uploading ? 'Subiendo...' : 'Crear producto'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: productos.filter(prod => (!filtroCategoria || prod.id_categoria === Number(filtroCategoria)) && (!filtroNombre || prod.nombre.toLowerCase().includes(filtroNombre.toLowerCase()))).map(prod => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"admin-producto-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-producto-info\",\n            children: editandoProducto === prod.id_producto ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: productoEdit.nombre,\n                onChange: e => setProductoEdit({\n                  ...productoEdit,\n                  nombre: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: productoEdit.descripcion,\n                onChange: e => setProductoEdit({\n                  ...productoEdit,\n                  descripcion: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: productoEdit.precio,\n                onChange: e => setProductoEdit({\n                  ...productoEdit,\n                  precio: Number(e.target.value)\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: productoEdit.cantidad,\n                onChange: e => setProductoEdit({\n                  ...productoEdit,\n                  cantidad: Number(e.target.value)\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-upload-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: handleFileChange,\n                  style: {\n                    display: 'none'\n                  },\n                  id: `image-upload-${prod.id_producto}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: `image-upload-${prod.id_producto}`,\n                  className: \"upload-button\",\n                  children: selectedFile ? 'Cambiar imagen' : 'Seleccionar imagen'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 27\n                }, this), selectedFile && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"file-name\",\n                  children: selectedFile.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: productoEdit.id_categoria,\n                onChange: e => setProductoEdit({\n                  ...productoEdit,\n                  id_categoria: Number(e.target.value)\n                }),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Categor\\xEDa\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 27\n                }, this), categorias.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: cat.id_categoria,\n                  children: cat.nombre\n                }, cat.id_categoria, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 50\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-btn-morado\",\n                onClick: () => handleActualizarProducto(prod.id_producto),\n                disabled: uploading,\n                children: uploading ? 'Subiendo...' : 'Guardar'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-btn-morado\",\n                onClick: () => handleEliminarProducto(prod.id_producto),\n                style: {\n                  marginLeft: '0.7rem'\n                },\n                children: \"Eliminar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setEditandoProducto(null),\n                style: {\n                  marginLeft: '0.7rem'\n                },\n                children: \"Cancelar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"admin-producto-nombre\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: prod.nombre\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 64\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"admin-producto-desc\",\n                children: prod.descripcion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"admin-producto-precio\",\n                children: [\"$\", prod.precio]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"admin-producto-stock\",\n                children: [\"Stock: \", prod.cantidad]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-btn-morado\",\n                onClick: () => handleEditarClick(prod),\n                children: \"Actualizar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 19\n          }, this), prod.imagen_url && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-producto-img\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `${prod.imagen_url}?t=${new Date().getTime()}`,\n              alt: prod.nombre,\n              style: {\n                maxWidth: '120px',\n                maxHeight: '120px',\n                borderRadius: '8px',\n                objectFit: 'cover'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 21\n          }, this)]\n        }, prod.id_producto, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 9\n    }, this), tab === \"categorias\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Categor\\xEDas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCrearCategoria,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: nuevaCategoria.nombre,\n          onChange: e => setNuevaCategoria({\n            ...nuevaCategoria,\n            nombre: e.target.value\n          }),\n          placeholder: \"Nombre\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: nuevaCategoria.descripcion_corta,\n          onChange: e => setNuevaCategoria({\n            ...nuevaCategoria,\n            descripcion_corta: e.target.value\n          }),\n          placeholder: \"Descripci\\xF3n corta\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: nuevaCategoria.descripcion_larga,\n          onChange: e => setNuevaCategoria({\n            ...nuevaCategoria,\n            descripcion_larga: e.target.value\n          }),\n          placeholder: \"Descripci\\xF3n larga\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Crear categor\\xEDa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: categorias.map(cat => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"admin-categoria-item\",\n          children: editandoCategoria === cat.id_categoria ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-categoria-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              value: categoriaEdit.nombre,\n              onChange: e => setCategoriaEdit({\n                ...categoriaEdit,\n                nombre: e.target.value\n              }),\n              placeholder: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: categoriaEdit.descripcion_corta,\n              onChange: e => setCategoriaEdit({\n                ...categoriaEdit,\n                descripcion_corta: e.target.value\n              }),\n              placeholder: \"Descripci\\xF3n corta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: categoriaEdit.descripcion_larga,\n              onChange: e => setCategoriaEdit({\n                ...categoriaEdit,\n                descripcion_larga: e.target.value\n              }),\n              placeholder: \"Descripci\\xF3n larga\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-categoria-botones\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-btn-morado\",\n                onClick: () => handleActualizarCategoria(cat.id_categoria),\n                children: \"Guardar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-btn-morado\",\n                onClick: () => handleEliminarCategoria(cat.id_categoria),\n                children: \"Eliminar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 539,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setEditandoCategoria(null),\n                children: \"Cancelar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-categoria-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-categoria-nombre\",\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: cat.nombre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 61\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-categoria-desc\",\n              children: cat.descripcion_corta\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-categoria-botones\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-btn-morado\",\n                onClick: () => handleEditarCategoriaClick(cat),\n                children: \"Actualizar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 19\n          }, this)\n        }, cat.id_categoria, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 9\n    }, this), tab === \"pedidos\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Pedidos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Filtrar por estado: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: filtroEstado,\n        onChange: e => setFiltroEstado(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Todos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 13\n        }, this), ESTADOS.map(estado => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: estado,\n          children: estado\n        }, estado, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: pedidos.map(pedido => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: '1.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Pedido #\", pedido.id_pedido]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 17\n          }, this), \" - Estado: \", pedido.estado, /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"admin-btn-morado\",\n            style: {\n              marginLeft: '1rem'\n            },\n            onClick: () => setEditandoEstadoId(editandoEstadoId === pedido.id_pedido ? null : pedido.id_pedido),\n            children: \"Actualizar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"admin-btn-morado\",\n            style: {\n              marginLeft: '0.7rem'\n            },\n            onClick: () => handleVerMas(pedido.id_pedido),\n            children: verMasId === pedido.id_pedido ? \"Ocultar\" : \"Ver más\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" | Cliente: \", pedido.id_cliente, \" | Direcci\\xF3n: \", pedido.direccion_envio, \" | Fecha: \", pedido.fecha_pedido]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 17\n          }, this), editandoEstadoId === pedido.id_pedido && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '0.7rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: pedido.estado,\n              onChange: e => handleActualizarEstado(pedido.id_pedido, e.target.value),\n              children: ESTADOS.map(estado => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: estado,\n                children: estado\n              }, estado, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                marginLeft: '0.7rem'\n              },\n              onClick: () => setEditandoEstadoId(null),\n              children: \"Cerrar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 19\n          }, this), verMasId === pedido.id_pedido && detallesPedido[pedido.id_pedido] && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem',\n              background: '#f3e5f5',\n              borderRadius: '8px',\n              padding: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Productos del pedido:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              style: {\n                marginTop: '0.7rem'\n              },\n              children: detallesPedido[pedido.id_pedido].map((det, idx) => {\n                var _det$producto, _det$producto2, _det$producto3;\n                return /*#__PURE__*/_jsxDEV(\"li\", {\n                  style: {\n                    marginBottom: '0.5rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: (_det$producto = det.producto) === null || _det$producto === void 0 ? void 0 : _det$producto.nombre\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 594,\n                    columnNumber: 27\n                  }, this), \" - \", (_det$producto2 = det.producto) === null || _det$producto2 === void 0 ? void 0 : _det$producto2.descripcion, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 594,\n                    columnNumber: 86\n                  }, this), \"Valor unitario: $\", (_det$producto3 = det.producto) === null || _det$producto3 === void 0 ? void 0 : _det$producto3.precio, \" | Cantidad: \", det.cantidad, \" | Subtotal: $\", det.subtotal]\n                }, det.id_detalle, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 593,\n                  columnNumber: 25\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 19\n          }, this)]\n        }, pedido.id_pedido, true, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 368,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminCuenta, \"bBalhXcD/rO/kkTohDHooA7RidM=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminCuenta;\nexport default AdminCuenta;\nvar _c;\n$RefreshReg$(_c, \"AdminCuenta\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","jsxDEV","_jsxDEV","Fragment","_Fragment","ESTADOS","AdminCuenta","_s","navigate","tab","setTab","uploading","setUploading","productos","setProductos","categorias","setCategorias","nuevoProducto","setNuevoProducto","nombre","descripcion","cantidad","precio","id_categoria","imagen_url","editandoProducto","setEditandoProducto","productoEdit","setProductoEdit","selectedFile","setSelectedFile","nuevaCategoria","setNuevaCategoria","descripcion_corta","descripcion_larga","editandoCategoria","setEditandoCategoria","categoriaEdit","setCategoriaEdit","pedidos","setPedidos","filtroEstado","setFiltroEstado","verMasId","setVerMasId","detallesPedido","setDetallesPedido","editandoEstadoId","setEditandoEstadoId","filtroCategoria","setFiltroCategoria","filtroNombre","setFiltroNombre","handleLogout","localStorage","removeItem","fetch","then","res","json","uploadImage","file","id_producto","fileName","filePath","error","uploadError","storage","from","upload","upsert","data","getPublicUrl","publicUrl","console","alert","handleFileChange","e","target","files","handleCrearProducto","preventDefault","method","headers","body","JSON","stringify","ok","prod","imagenUrl","updateRes","updatedProd","handleActualizarProducto","id","extensions","baseFileName","filesToDelete","map","ext","deleteError","remove","productoData","actualizado","p","productosRes","productosActualizados","handleEditarClick","handleEliminarProducto","producto","find","Error","log","message","deleteRes","handleCrearCategoria","cat","handleEliminarCategoria","filter","c","handleEditarCategoriaClick","handleActualizarCategoria","actualizada","handleActualizarEstado","id_pedido","nuevoEstado","pedido","estado","handleVerMas","detallesRes","detallesAll","detalles","d","prev","det","className","children","_jsxFileName","lineNumber","columnNumber","onClick","style","float","marginTop","marginBottom","background","color","border","borderRadius","padding","fontWeight","cursor","value","onChange","type","placeholder","flex","onSubmit","required","Number","accept","display","htmlFor","name","disabled","toLowerCase","includes","marginLeft","src","Date","getTime","alt","maxWidth","maxHeight","objectFit","id_cliente","direccion_envio","fecha_pedido","idx","_det$producto","_det$producto2","_det$producto3","subtotal","id_detalle","_c","$RefreshReg$"],"sources":["C:/Users/beleño/Desktop/gestion/gestionmonorepo/front_gestion/src/components/AdminCuenta.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../styles/AdminCuenta.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"../config/supabase\";\r\n\r\nconst ESTADOS = [\r\n  \"Pago confirmado\",\r\n  \"En preparación\",\r\n  \"En domicilio\",\r\n  \"Listo para recoger\",\r\n  \"Entregado\"\r\n];\r\n\r\nfunction AdminCuenta() {\r\n  const navigate = useNavigate();\r\n  const [tab, setTab] = useState(\"productos\");\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  // Productos\r\n  const [productos, setProductos] = useState([]);\r\n  const [categorias, setCategorias] = useState([]);\r\n  const [nuevoProducto, setNuevoProducto] = useState({ nombre: \"\", descripcion: \"\", cantidad: 0, precio: 0, id_categoria: \"\", imagen_url: \"\" });\r\n  const [editandoProducto, setEditandoProducto] = useState(null);\r\n  const [productoEdit, setProductoEdit] = useState({});\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n  // Categorías\r\n  const [nuevaCategoria, setNuevaCategoria] = useState({ nombre: \"\", descripcion_corta: \"\", descripcion_larga: \"\" });\r\n  const [editandoCategoria, setEditandoCategoria] = useState(null);\r\n  const [categoriaEdit, setCategoriaEdit] = useState({});\r\n\r\n  // Pedidos\r\n  const [pedidos, setPedidos] = useState([]);\r\n  const [filtroEstado, setFiltroEstado] = useState(\"\");\r\n  const [verMasId, setVerMasId] = useState(null);\r\n  const [detallesPedido, setDetallesPedido] = useState({});\r\n  const [editandoEstadoId, setEditandoEstadoId] = useState(null);\r\n\r\n  // Filtros\r\n  const [filtroCategoria, setFiltroCategoria] = useState(\"\");\r\n  const [filtroNombre, setFiltroNombre] = useState(\"\");\r\n\r\n  // Cerrar sesión\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"usuario\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  // Cargar datos iniciales\r\n  useEffect(() => {\r\n    fetch(\"http://127.0.0.1:8000/productos/\").then(res => res.json()).then(setProductos);\r\n    fetch(\"http://127.0.0.1:8000/categorias/\").then(res => res.json()).then(setCategorias);\r\n    fetch(\"http://127.0.0.1:8000/pedidos/\").then(res => res.json()).then(setPedidos);\r\n  }, []);\r\n\r\n  // Filtrar pedidos por estado\r\n  useEffect(() => {\r\n    if (filtroEstado) {\r\n      fetch(`http://127.0.0.1:8000/pedidos/estado/${filtroEstado}`).then(res => res.json()).then(setPedidos);\r\n    } else {\r\n      fetch(\"http://127.0.0.1:8000/pedidos/\").then(res => res.json()).then(setPedidos);\r\n    }\r\n  }, [filtroEstado]);\r\n\r\n  // Función para subir imagen a Supabase\r\n  const uploadImage = async (file, id_producto) => {\r\n    try {\r\n      setUploading(true);\r\n      \r\n      // Usar el formato con doble barra en la ruta\r\n      const fileName = `//producto_${id_producto}.jpg`;\r\n      const filePath = fileName;\r\n\r\n      // Subir archivo a Supabase Storage\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('productos')\r\n        .upload(filePath, file, { upsert: true });\r\n\r\n      if (uploadError) {\r\n        throw uploadError;\r\n      }\r\n\r\n      // Obtener la URL pública sin timestamp\r\n      const { data } = supabase.storage\r\n        .from('productos')\r\n        .getPublicUrl(filePath);\r\n\r\n      return data.publicUrl;\r\n    } catch (error) {\r\n      console.error('Error al subir la imagen:', error);\r\n      alert('Error al subir la imagen');\r\n      return null;\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  // Manejador para el cambio de archivo\r\n  const handleFileChange = (e) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      setSelectedFile(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  // CRUD Productos\r\n  const handleCrearProducto = async e => {\r\n    e.preventDefault();\r\n    \r\n    // 1. Crear el producto primero para obtener el id\r\n    const res = await fetch(\"http://127.0.0.1:8000/productos/\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ ...nuevoProducto, imagen_url: \"\" })\r\n    });\r\n\r\n    if (res.ok) {\r\n      const prod = await res.json();\r\n      \r\n      // 2. Si hay archivo, subirlo con el id del producto\r\n      let imagenUrl = \"\";\r\n      if (selectedFile) {\r\n        imagenUrl = await uploadImage(selectedFile, prod.id_producto);\r\n        if (!imagenUrl) {\r\n          // Si falla la subida de la imagen, eliminar el producto creado\r\n          await fetch(`http://127.0.0.1:8000/productos/${prod.id_producto}`, { method: \"DELETE\" });\r\n          return;\r\n        }\r\n        \r\n        // Actualizar el producto con la url de la imagen\r\n        const updateRes = await fetch(`http://127.0.0.1:8000/productos/${prod.id_producto}`, {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ ...prod, imagen_url: imagenUrl })\r\n        });\r\n        \r\n        if (updateRes.ok) {\r\n          const updatedProd = await updateRes.json();\r\n          setProductos([...productos, updatedProd]);\r\n        }\r\n      } else {\r\n        setProductos([...productos, prod]);\r\n      }\r\n\r\n      setNuevoProducto({ \r\n        nombre: \"\", \r\n        descripcion: \"\", \r\n        cantidad: 0, \r\n        precio: 0, \r\n        id_categoria: \"\", \r\n        imagen_url: \"\" \r\n      });\r\n      setSelectedFile(null);\r\n    }\r\n  };\r\n\r\n  const handleActualizarProducto = async id => {\r\n    try {\r\n      let imagenUrl = productoEdit.imagen_url;\r\n      \r\n      // Si hay un archivo seleccionado, eliminar la imagen antigua y subir la nueva\r\n      if (selectedFile) {\r\n        // 1. Eliminar la imagen antigua si existe\r\n        if (productoEdit.imagen_url) {\r\n          // Intentar eliminar con diferentes extensiones comunes\r\n          const extensions = ['.jpg', '.jpeg', '.png', '.gif'];\r\n          const baseFileName = `//producto_${id}`;\r\n          \r\n          // Crear array de nombres de archivo a eliminar\r\n          const filesToDelete = extensions.map(ext => `${baseFileName}${ext}`);\r\n          \r\n          // Eliminar todos los posibles archivos\r\n          const { error: deleteError } = await supabase.storage\r\n            .from('productos')\r\n            .remove(filesToDelete);\r\n\r\n          if (deleteError) {\r\n            console.error('Error al eliminar la imagen antigua:', deleteError);\r\n          }\r\n        }\r\n\r\n        // 2. Subir la nueva imagen\r\n        imagenUrl = await uploadImage(selectedFile, id);\r\n        if (!imagenUrl) {\r\n          alert('Error al subir la imagen');\r\n          return;\r\n        }\r\n      }\r\n\r\n      const productoData = {\r\n        ...productoEdit,\r\n        imagen_url: imagenUrl\r\n      };\r\n\r\n      const res = await fetch(`http://127.0.0.1:8000/productos/${id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(productoData)\r\n      });\r\n\r\n      if (res.ok) {\r\n        const actualizado = await res.json();\r\n        // Actualizar la lista de productos\r\n        setProductos(productos.map(p => p.id_producto === id ? actualizado : p));\r\n        setEditandoProducto(null);\r\n        setProductoEdit({});\r\n        setSelectedFile(null);\r\n        \r\n        // Recargar la lista completa de productos para asegurar que todo está actualizado\r\n        const productosRes = await fetch(\"http://127.0.0.1:8000/productos/\");\r\n        if (productosRes.ok) {\r\n          const productosActualizados = await productosRes.json();\r\n          setProductos(productosActualizados);\r\n        }\r\n      } else {\r\n        alert('Error al actualizar el producto');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al actualizar el producto:', error);\r\n      alert('Error al actualizar el producto');\r\n    }\r\n  };\r\n\r\n  const handleEditarClick = prod => {\r\n    setEditandoProducto(prod.id_producto);\r\n    setProductoEdit({\r\n      nombre: prod.nombre,\r\n      descripcion: prod.descripcion,\r\n      cantidad: prod.cantidad,\r\n      precio: prod.precio,\r\n      id_categoria: prod.id_categoria,\r\n      imagen_url: prod.imagen_url\r\n    });\r\n  };\r\n\r\n  const handleEliminarProducto = async id => {\r\n    try {\r\n      // 1. Obtener el producto del estado actual\r\n      const producto = productos.find(p => p.id_producto === id);\r\n      if (!producto) throw new Error('Producto no encontrado');\r\n\r\n      // 2. Si el producto tiene una imagen, eliminarla de Supabase\r\n      if (producto.imagen_url) {\r\n        console.log('Intentando eliminar imagen para producto:', id);\r\n        console.log('URL de la imagen:', producto.imagen_url);\r\n\r\n        // Construir el nombre del archivo sin las barras iniciales\r\n        const fileName = `producto_${id}.jpg`;\r\n        console.log('Nombre del archivo a eliminar:', fileName);\r\n\r\n        // Intentar eliminar el archivo\r\n        const { data, error: deleteError } = await supabase.storage\r\n          .from('productos')\r\n          .remove([fileName]);\r\n\r\n        if (deleteError) {\r\n          console.error('Error al eliminar la imagen:', deleteError);\r\n          throw new Error('Error al eliminar la imagen del producto: ' + deleteError.message);\r\n        }\r\n\r\n        console.log('Resultado de la eliminación:', data);\r\n      }\r\n\r\n      // 3. Eliminar el producto de la base de datos\r\n      const deleteRes = await fetch(`http://127.0.0.1:8000/productos/${id}`, { \r\n        method: \"DELETE\" \r\n      });\r\n      \r\n      if (!deleteRes.ok) throw new Error('Error al eliminar el producto');\r\n\r\n      // 4. Actualizar la lista de productos\r\n      const productosRes = await fetch(\"http://127.0.0.1:8000/productos/\");\r\n      if (productosRes.ok) {\r\n        const productosActualizados = await productosRes.json();\r\n        setProductos(productosActualizados);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al eliminar el producto:', error);\r\n      alert('Error al eliminar el producto: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // CRUD Categorías\r\n  const handleCrearCategoria = async e => {\r\n    e.preventDefault();\r\n    const res = await fetch(\"http://127.0.0.1:8000/categorias/\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(nuevaCategoria)\r\n    });\r\n    if (res.ok) {\r\n      const cat = await res.json();\r\n      setCategorias([...categorias, cat]);\r\n      setNuevaCategoria({ nombre: \"\", descripcion_corta: \"\", descripcion_larga: \"\" });\r\n    }\r\n  };\r\n\r\n  const handleEliminarCategoria = async id => {\r\n    await fetch(`http://127.0.0.1:8000/categorias/${id}`, { method: \"DELETE\" });\r\n    setCategorias(categorias.filter(c => c.id_categoria !== id));\r\n  };\r\n\r\n  const handleEditarCategoriaClick = cat => {\r\n    setEditandoCategoria(cat.id_categoria);\r\n    setCategoriaEdit({\r\n      nombre: cat.nombre,\r\n      descripcion_corta: cat.descripcion_corta,\r\n      descripcion_larga: cat.descripcion_larga\r\n    });\r\n  };\r\n\r\n  const handleActualizarCategoria = async id => {\r\n    const res = await fetch(`http://127.0.0.1:8000/categorias/${id}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(categoriaEdit)\r\n    });\r\n    if (res.ok) {\r\n      const actualizada = await res.json();\r\n      setCategorias(categorias.map(c => c.id_categoria === id ? actualizada : c));\r\n      setEditandoCategoria(null);\r\n      setCategoriaEdit({});\r\n    }\r\n  };\r\n\r\n  // Actualizar estado de pedido\r\n  const handleActualizarEstado = async (id_pedido, nuevoEstado) => {\r\n    const pedido = pedidos.find(p => p.id_pedido === id_pedido);\r\n    if (!pedido) return;\r\n    const res = await fetch(`http://127.0.0.1:8000/pedidos/${id_pedido}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ ...pedido, estado: nuevoEstado })\r\n    });\r\n    if (res.ok) {\r\n      setPedidos(pedidos.map(p => p.id_pedido === id_pedido ? { ...p, estado: nuevoEstado } : p));\r\n    }\r\n  };\r\n\r\n  // Ver productos del pedido\r\n  const handleVerMas = async (id_pedido) => {\r\n    if (verMasId === id_pedido) {\r\n      setVerMasId(null);\r\n      return;\r\n    }\r\n    // Si ya tenemos los detalles, solo mostrar\r\n    if (detallesPedido[id_pedido]) {\r\n      setVerMasId(id_pedido);\r\n      return;\r\n    }\r\n    // Obtener detalles y productos\r\n    const detallesRes = await fetch(`http://127.0.0.1:8000/detalle_pedidos/`);\r\n    const detallesAll = await detallesRes.json();\r\n    const detalles = detallesAll.filter(d => d.id_pedido === id_pedido);\r\n    // Obtener productos\r\n    const productosRes = await fetch(`http://127.0.0.1:8000/pedidos/${id_pedido}/productos`);\r\n    const productos = await productosRes.json();\r\n    setDetallesPedido(prev => ({\r\n      ...prev,\r\n      [id_pedido]: detalles.map(det => ({\r\n        ...det,\r\n        producto: productos.find(p => p.id_producto === det.id_producto)\r\n      }))\r\n    }));\r\n    setVerMasId(id_pedido);\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-cuenta-container\">\r\n      <h2>Panel de administrador</h2>\r\n      <button onClick={handleLogout} style={{float: 'right', marginTop: '-2.5rem', marginBottom: '1rem', background: '#d32f2f', color: '#fff', border: 'none', borderRadius: '6px', padding: '0.5rem 1.2rem', fontWeight: 'bold', cursor: 'pointer'}}>Cerrar sesión</button>\r\n      <div className=\"admin-tabs\">\r\n        <button onClick={() => setTab(\"productos\")} className={tab === \"productos\" ? \"active\" : \"\"}>Productos</button>\r\n        <button onClick={() => setTab(\"categorias\")} className={tab === \"categorias\" ? \"active\" : \"\"}>Categorías</button>\r\n        <button onClick={() => setTab(\"pedidos\")} className={tab === \"pedidos\" ? \"active\" : \"\"}>Pedidos</button>\r\n      </div>\r\n\r\n      {/* CRUD Productos */}\r\n      {tab === \"productos\" && (\r\n        <div>\r\n          <h3>Productos</h3>\r\n          <div className=\"admin-filtros-productos\">\r\n            <select\r\n              value={filtroCategoria}\r\n              onChange={e => setFiltroCategoria(e.target.value)}\r\n              style={{padding: \"0.5rem\", borderRadius: \"6px\", border: \"1.5px solid #6C3483\"}}\r\n            >\r\n              <option value=\"\">Todas las categorías</option>\r\n              {categorias.map(cat => (\r\n                <option key={cat.id_categoria} value={cat.id_categoria}>{cat.nombre}</option>\r\n              ))}\r\n            </select>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Buscar por nombre...\"\r\n              value={filtroNombre}\r\n              onChange={e => setFiltroNombre(e.target.value)}\r\n              style={{padding: \"0.5rem\", borderRadius: \"6px\", border: \"1.5px solid #6C3483\", flex: \"1 1 200px\"}}\r\n            />\r\n          </div>\r\n          <form onSubmit={handleCrearProducto} className=\"admin-form\">\r\n            <input \r\n              value={nuevoProducto.nombre} \r\n              onChange={e => setNuevoProducto({ ...nuevoProducto, nombre: e.target.value })} \r\n              placeholder=\"Nombre\" \r\n              required \r\n            />\r\n            <input \r\n              value={nuevoProducto.descripcion} \r\n              onChange={e => setNuevoProducto({ ...nuevoProducto, descripcion: e.target.value })} \r\n              placeholder=\"Descripción\" \r\n              required \r\n            />\r\n            <input \r\n              type=\"number\" \r\n              value={nuevoProducto.cantidad} \r\n              onChange={e => setNuevoProducto({ ...nuevoProducto, cantidad: Number(e.target.value) })} \r\n              placeholder=\"Cantidad\" \r\n              required \r\n            />\r\n            <input \r\n              type=\"number\" \r\n              value={nuevoProducto.precio} \r\n              onChange={e => setNuevoProducto({ ...nuevoProducto, precio: Number(e.target.value) })} \r\n              placeholder=\"Precio\" \r\n              required \r\n            />\r\n            <select \r\n              value={nuevoProducto.id_categoria} \r\n              onChange={e => setNuevoProducto({ ...nuevoProducto, id_categoria: Number(e.target.value) })} \r\n              required\r\n            >\r\n              <option value=\"\">Categoría</option>\r\n              {categorias.map(cat => <option key={cat.id_categoria} value={cat.id_categoria}>{cat.nombre}</option>)}\r\n            </select>\r\n            <div className=\"image-upload-container\">\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleFileChange}\r\n                style={{ display: 'none' }}\r\n                id=\"image-upload\"\r\n              />\r\n              <label htmlFor=\"image-upload\" className=\"upload-button\">\r\n                {selectedFile ? 'Cambiar imagen' : 'Seleccionar imagen'}\r\n              </label>\r\n              {selectedFile && (\r\n                <span className=\"file-name\">{selectedFile.name}</span>\r\n              )}\r\n            </div>\r\n            <button type=\"submit\" disabled={uploading}>\r\n              {uploading ? 'Subiendo...' : 'Crear producto'}\r\n            </button>\r\n          </form>\r\n          <ul>\r\n            {productos\r\n              .filter(prod =>\r\n                (!filtroCategoria || prod.id_categoria === Number(filtroCategoria)) &&\r\n                (!filtroNombre || prod.nombre.toLowerCase().includes(filtroNombre.toLowerCase()))\r\n              )\r\n              .map(prod => (\r\n                <li key={prod.id_producto} className=\"admin-producto-item\">\r\n                  <div className=\"admin-producto-info\">\r\n                    {editandoProducto === prod.id_producto ? (\r\n                      <>\r\n                        <input value={productoEdit.nombre} onChange={e => setProductoEdit({ ...productoEdit, nombre: e.target.value })} />\r\n                        <input value={productoEdit.descripcion} onChange={e => setProductoEdit({ ...productoEdit, descripcion: e.target.value })} />\r\n                        <input type=\"number\" value={productoEdit.precio} onChange={e => setProductoEdit({ ...productoEdit, precio: Number(e.target.value) })} />\r\n                        <input type=\"number\" value={productoEdit.cantidad} onChange={e => setProductoEdit({ ...productoEdit, cantidad: Number(e.target.value) })} />\r\n                        <div className=\"image-upload-container\">\r\n                          <input\r\n                            type=\"file\"\r\n                            accept=\"image/*\"\r\n                            onChange={handleFileChange}\r\n                            style={{ display: 'none' }}\r\n                            id={`image-upload-${prod.id_producto}`}\r\n                          />\r\n                          <label htmlFor={`image-upload-${prod.id_producto}`} className=\"upload-button\">\r\n                            {selectedFile ? 'Cambiar imagen' : 'Seleccionar imagen'}\r\n                          </label>\r\n                          {selectedFile && (\r\n                            <span className=\"file-name\">{selectedFile.name}</span>\r\n                          )}\r\n                        </div>\r\n                        <select value={productoEdit.id_categoria} onChange={e => setProductoEdit({ ...productoEdit, id_categoria: Number(e.target.value) })}>\r\n                          <option value=\"\">Categoría</option>\r\n                          {categorias.map(cat => <option key={cat.id_categoria} value={cat.id_categoria}>{cat.nombre}</option>)}\r\n                        </select>\r\n                        <button className=\"admin-btn-morado\" onClick={() => handleActualizarProducto(prod.id_producto)} disabled={uploading}>\r\n                          {uploading ? 'Subiendo...' : 'Guardar'}\r\n                        </button>\r\n                        <button className=\"admin-btn-morado\" onClick={() => handleEliminarProducto(prod.id_producto)} style={{marginLeft: '0.7rem'}}>Eliminar</button>\r\n                        <button onClick={() => setEditandoProducto(null)} style={{marginLeft: '0.7rem'}}>Cancelar</button>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <div className=\"admin-producto-nombre\"><b>{prod.nombre}</b></div>\r\n                        <div className=\"admin-producto-desc\">{prod.descripcion}</div>\r\n                        <div className=\"admin-producto-precio\">${prod.precio}</div>\r\n                        <div className=\"admin-producto-stock\">Stock: {prod.cantidad}</div>\r\n                        <button className=\"admin-btn-morado\" onClick={() => handleEditarClick(prod)}>Actualizar</button>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  {prod.imagen_url && (\r\n                    <div className=\"admin-producto-img\">\r\n                      <img \r\n                        src={`${prod.imagen_url}?t=${new Date().getTime()}`} \r\n                        alt={prod.nombre} \r\n                        style={{maxWidth: '120px', maxHeight: '120px', borderRadius: '8px', objectFit: 'cover'}}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </li>\r\n              ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* CRUD Categorías */}\r\n      {tab === \"categorias\" && (\r\n        <div>\r\n          <h3>Categorías</h3>\r\n          <form onSubmit={handleCrearCategoria} className=\"admin-form\">\r\n            <input value={nuevaCategoria.nombre} onChange={e => setNuevaCategoria({ ...nuevaCategoria, nombre: e.target.value })} placeholder=\"Nombre\" required />\r\n            <input value={nuevaCategoria.descripcion_corta} onChange={e => setNuevaCategoria({ ...nuevaCategoria, descripcion_corta: e.target.value })} placeholder=\"Descripción corta\" required />\r\n            <input value={nuevaCategoria.descripcion_larga} onChange={e => setNuevaCategoria({ ...nuevaCategoria, descripcion_larga: e.target.value })} placeholder=\"Descripción larga\" />\r\n            <button type=\"submit\">Crear categoría</button>\r\n          </form>\r\n          <ul>\r\n            {categorias.map(cat => (\r\n              <li key={cat.id_categoria} className=\"admin-categoria-item\">\r\n                {editandoCategoria === cat.id_categoria ? (\r\n                  <div className=\"admin-categoria-info\">\r\n                    <input value={categoriaEdit.nombre} onChange={e => setCategoriaEdit({ ...categoriaEdit, nombre: e.target.value })} placeholder=\"Nombre\" />\r\n                    <input value={categoriaEdit.descripcion_corta} onChange={e => setCategoriaEdit({ ...categoriaEdit, descripcion_corta: e.target.value })} placeholder=\"Descripción corta\" />\r\n                    <input value={categoriaEdit.descripcion_larga} onChange={e => setCategoriaEdit({ ...categoriaEdit, descripcion_larga: e.target.value })} placeholder=\"Descripción larga\" />\r\n                    <div className=\"admin-categoria-botones\">\r\n                      <button className=\"admin-btn-morado\" onClick={() => handleActualizarCategoria(cat.id_categoria)}>Guardar</button>\r\n                      <button className=\"admin-btn-morado\" onClick={() => handleEliminarCategoria(cat.id_categoria)}>Eliminar</button>\r\n                      <button onClick={() => setEditandoCategoria(null)}>Cancelar</button>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"admin-categoria-info\">\r\n                    <div className=\"admin-categoria-nombre\"><b>{cat.nombre}</b></div>\r\n                    <div className=\"admin-categoria-desc\">{cat.descripcion_corta}</div>\r\n                    <div className=\"admin-categoria-botones\">\r\n                      <button className=\"admin-btn-morado\" onClick={() => handleEditarCategoriaClick(cat)}>Actualizar</button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* Gestión de Pedidos */}\r\n      {tab === \"pedidos\" && (\r\n        <div>\r\n          <h3>Pedidos</h3>\r\n          <label>Filtrar por estado: </label>\r\n          <select value={filtroEstado} onChange={e => setFiltroEstado(e.target.value)}>\r\n            <option value=\"\">Todos</option>\r\n            {ESTADOS.map(estado => (\r\n              <option key={estado} value={estado}>{estado}</option>\r\n            ))}\r\n          </select>\r\n          <ul>\r\n            {pedidos.map(pedido => (\r\n              <li key={pedido.id_pedido} style={{marginBottom: '1.5rem'}}>\r\n                <b>Pedido #{pedido.id_pedido}</b> - Estado: {pedido.estado}\r\n                <button className=\"admin-btn-morado\" style={{marginLeft: '1rem'}} onClick={() => setEditandoEstadoId(editandoEstadoId === pedido.id_pedido ? null : pedido.id_pedido)}>Actualizar</button>\r\n                <button className=\"admin-btn-morado\" style={{marginLeft: '0.7rem'}} onClick={() => handleVerMas(pedido.id_pedido)}>\r\n                  {verMasId === pedido.id_pedido ? \"Ocultar\" : \"Ver más\"}\r\n                </button>\r\n                <span> | Cliente: {pedido.id_cliente} | Dirección: {pedido.direccion_envio} | Fecha: {pedido.fecha_pedido}</span>\r\n                {editandoEstadoId === pedido.id_pedido && (\r\n                  <div style={{marginTop: '0.7rem'}}>\r\n                    <select value={pedido.estado} onChange={e => handleActualizarEstado(pedido.id_pedido, e.target.value)}>\r\n                      {ESTADOS.map(estado => (\r\n                        <option key={estado} value={estado}>{estado}</option>\r\n                      ))}\r\n                    </select>\r\n                    <button style={{marginLeft: '0.7rem'}} onClick={() => setEditandoEstadoId(null)}>Cerrar</button>\r\n                  </div>\r\n                )}\r\n                {verMasId === pedido.id_pedido && detallesPedido[pedido.id_pedido] && (\r\n                  <div style={{marginTop: '1rem', background: '#f3e5f5', borderRadius: '8px', padding: '1rem'}}>\r\n                    <b>Productos del pedido:</b>\r\n                    <ul style={{marginTop: '0.7rem'}}>\r\n                      {detallesPedido[pedido.id_pedido].map((det, idx) => (\r\n                        <li key={det.id_detalle} style={{marginBottom: '0.5rem'}}>\r\n                          <b>{det.producto?.nombre}</b> - {det.producto?.descripcion}<br/>\r\n                          Valor unitario: ${det.producto?.precio} | Cantidad: {det.cantidad} | Subtotal: ${det.subtotal}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminCuenta;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}